<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧬 Tissues Quiz Game</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #8b5cf6;
            --correct: #10b981;
            --incorrect: #ef4444;
            --unattempted: #6b7280;
            --bg-dark: #0f172a;
            --bg-darker: #1e293b;
            --bg-light: #334155;
            --text: #f8fafc;
            --text-muted: #9ca3af;
            --kbc-blue: #0056d3;
            --kbc-orange: #ff9b44;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-center;
            padding: 1rem;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            height: 90vh;
            background-color: var(--bg-darker);
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            overflow: hidden;
            position: relative;
        }

        .main-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .sidebar {
            width: 80px;
            background-color: var(--bg-light);
            padding: 1rem 0.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            border-left: 1px solid #475569;
        }

        .question-nav {
            width: 40px;
            height: 40px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text);
            font-size: 0.8rem;
            font-weight: 600;
            background-color: var(--unattempted);
            border: 1px solid #475569;
        }

        .question-nav.attempted { background-color: var(--bg-darker); }
        .question-nav.correct { background-color: var(--correct); }
        .question-nav.incorrect { background-color: var(--incorrect); }
        .question-nav.active { border: 2px solid var(--primary); }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            border-bottom: 1px solid #475569;
            padding-bottom: 1rem;
        }

        .score-card {
            background-color: var(--kbc-blue);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .question-container {
            background-color: var(--bg-light);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #475569;
        }

        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text);
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .option-btn {
            background-color: var(--bg-darker);
            color: var(--text);
            border: 2px solid #475569;
            border-radius: 0.75rem;
            padding: 1rem;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option-btn:hover { border-color: var(--primary); }
        .option-btn.correct { background-color: var(--correct); border-color: var(--correct); color: white; }
        .option-btn.incorrect { background-color: var(--incorrect); border-color: var(--incorrect); color: white; }
        .option-btn.selected { background-color: var(--kbc-orange); border-color: var(--kbc-orange); color: white; }

        .explanation-container {
            background-color: var(--bg-light);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-left: 4px solid var(--primary);
            display: none;
        }

        .explanation-container.show { display: block; }

        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #475569;
        }

        .nav-btn {
            background-color: var(--bg-light);
            color: var(--text);
            border: 1px solid #475569;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover { background-color: var(--bg-darker); }
        .nav-btn.active { background-color: var(--primary); color: white; }

        .topic-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .topic-card {
            background-color: var(--bg-light);
            border: 1px solid #475569;
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .topic-card:hover {
            background-color: var(--bg-darker);
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        @media (max-width: 768px) {
            .container { height: auto; flex-direction: column; }
            .sidebar { width: 100%; flex-direction: row; border-left: none; border-top: 1px solid #475569; }
            .options-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center">
    <!-- Main Container -->
    <div class="container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <h1 class="text-2xl font-bold text-white">🧬 Tissues Quiz Game</h1>
                <div class="score-card">
                    <i class="fas fa-star"></i>
                    Score: <span id="score">0</span>
                </div>
            </div>

            <!-- Topic Selector (Initially Visible) -->
            <div id="topic-selector" class="topic-selector">
                <div class="topic-card" onclick="startQuiz('Plant Tissues')">
                    <h3 class="text-xl font-bold">Plant Tissues</h3>
                    <p class="text-sm text-text-muted">20 Questions</p>
                </div>
                <div class="topic-card" onclick="startQuiz('Animal Tissues: Epithelial')">
                    <h3 class="text-xl font-bold">Animal Tissues: Epithelial</h3>
                    <p class="text-sm text-text-muted">20 Questions</p>
                </div>
                <div class="topic-card" onclick="startQuiz('Animal Tissues: Connective')">
                    <h3 class="text-xl font-bold">Animal Tissues: Connective</h3>
                    <p class="text-sm text-text-muted">20 Questions</p>
                </div>
                <div class="topic-card" onclick="startQuiz('Animal Tissues: Muscular')">
                    <h3 class="text-xl font-bold">Animal Tissues: Muscular</h3>
                    <p class="text-sm text-text-muted">20 Questions</p>
                </div>
                <div class="topic-card" onclick="startQuiz('Animal Tissues: Nervous')">
                    <h3 class="text-xl font-bold">Animal Tissues: Nervous</h3>
                    <p class="text-sm text-text-muted">20 Questions</p>
                </div>
                <div class="topic-card" onclick="startQuiz('Quiz Master Challenge')">
                    <h3 class="text-xl font-bold">✨ Quiz Master Challenge</h3>
                    <p class="text-sm text-text-muted">20 Advanced Questions</p>
                </div>
            </div>

            <!-- Quiz Screen (Initially Hidden) -->
            <div id="quiz-screen" class="hidden">
                <div class="question-container">
                    <h2 class="text-lg font-semibold text-primary mb-2" id="topic-title">Topic</h2>
                    <p class="text-sm text-text-muted mb-4" id="question-number">Question 1</p>
                    <p class="question-text" id="question-text">Question text goes here?</p>

                    <div class="options-container" id="options-container">
                        <!-- Options will be inserted here by JavaScript -->
                    </div>
                </div>

                <div class="explanation-container" id="explanation-container">
                    <h3 class="text-lg font-semibold text-primary mb-2">Explanation:</h3>
                    <p class="text-text-muted" id="explanation-text">Explanation text goes here.</p>
                </div>

                <div class="footer">
                    <div class="progress-container">
                        <p class="text-sm">
                            Progress: <span id="progress">0/20</span> |
                            Attempted: <span id="attempted">0</span>
                        </p>
                    </div>

                    <div class="navigation-controls">
                        <button class="nav-btn" id="prev-btn" disabled>
                            <i class="fas fa-arrow-left"></i> Prev
                        </button>
                        <button class="nav-btn" id="next-btn">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="nav-btn" id="submit-btn" style="display: none;">
                            Submit <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>

                <button class="nav-btn" id="deeper-explanation-btn">
                    <i class="fas fa-sparkles"></i> Get a Deeper Explanation
                </button>
            </div>

            <!-- Results Screen (Initially Hidden) -->
            <div id="results-screen" class="hidden text-center">
                <div class="question-container">
                    <div class="result-icon mb-4">
                        <i class="fas fa-trophy text-6xl text-correct"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-white mb-2">Quiz Complete! 🎉</h2>
                    <p class="text-xl text-text-muted mb-6">
                        Your score: <span id="final-score" class="text-primary font-bold">0/20</span>
                    </p>
                    <div class="flex justify-center gap-4">
                        <button class="nav-btn active" id="restart-btn">
                            <i class="fas fa-redo"></i> Restart Quiz
                        </button>
                        <button class="nav-btn" id="new-topic-btn">
                            <i class="fas fa-book"></i> Choose New Topic
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar Navigation -->
        <div class="sidebar" id="sidebar">
            <!-- Question navigation buttons will be inserted here by JavaScript -->
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Quiz Data: 6 topics, 20 questions each
        const quizData = {
            "Plant Tissues": [
                { question: "Which type of plant tissue is responsible for growth at the tips of roots and stems?", options: ["Parenchyma", "Meristematic tissue", "Sclerenchyma", "Collenchyma"], answer: "Meristematic tissue", explanation: "Meristematic tissue is a type of plant tissue with the ability to divide. It is found at the tips of roots and shoots, where it facilitates primary growth (increase in length)." },
                { question: "What is the function of xylem?", options: ["Transport of food", "Transport of water and minerals", "Storage of water", "Support to the plant"], answer: "Transport of water and minerals", explanation: "Xylem is a complex permanent tissue in plants that conducts water and dissolved minerals from the roots to the rest of the plant. It also provides physical support." },
                { question: "Which of these is a type of simple permanent plant tissue?", options: ["Xylem", "Phloem", "Parenchyma", "Both Xylem and Phloem"], answer: "Parenchyma", explanation: "Parenchyma is a simple permanent tissue, meaning it is made of only one type of cell. Xylem and phloem are complex tissues as they are composed of multiple cell types." },
                { question: "The presence of lignin is characteristic of which tissue?", options: ["Sclerenchyma", "Parenchyma", "Collenchyma", "Epidermis"], answer: "Sclerenchyma", explanation: "Sclerenchyma cells are dead cells with thick, rigid cell walls due to the deposition of lignin. This provides mechanical support to the plant." },
                { question: "Which tissue is found in the soft parts of a plant, like the cortex of roots and fruits?", options: ["Epidermis", "Parenchyma", "Collenchyma", "Sclerenchyma"], answer: "Parenchyma", explanation: "Parenchyma tissue is composed of living cells that are loosely packed, providing space for gas exchange. They are found in the soft parts like the cortex, pith, and fruit pulp." },
                { question: "Which meristem is responsible for increasing the girth of the stem or root?", options: ["Apical meristem", "Intercalary meristem", "Lateral meristem", "Protoderm"], answer: "Lateral meristem", explanation: "Lateral meristems, such as vascular cambium and cork cambium, are responsible for secondary growth, which increases the diameter or girth of the plant." },
                { question: "Which cells in phloem are responsible for transporting food?", options: ["Phloem parenchyma", "Sieve tubes", "Companion cells", "Phloem fibres"], answer: "Sieve tubes", explanation: "Sieve tubes are the main conducting elements of phloem tissue. They are living cells arranged end-to-end to form a continuous tube for the transport of food." },
                { question: "Aerenchyma, a type of parenchyma, is found in aquatic plants to provide:", options: ["Support", "Flexibility", "Buoyancy", "Mechanical strength"], answer: "Buoyancy", explanation: "Aerenchyma has large air-filled cavities that help the plant to float, providing buoyancy to aquatic plants." },
                { question: "What is the primary function of the epidermis in plants?", options: ["Photosynthesis", "Protection", "Water transport", "Food storage"], answer: "Protection", explanation: "The epidermis is the outermost protective layer of the plant body, protecting it from external factors, mechanical injury, and water loss." },
                { question: "Which type of sclerenchyma cells are long and pointed, providing support?", options: ["Sclereids", "Fibres", "Tracheids", "Vessels"], answer: "Fibres", explanation: "Sclerenchyma fibres are long, narrow cells with pointed ends. They are found in groups and provide mechanical support to various parts of the plant." },
                { question: "The process of forming new cells by meristematic tissue is called:", options: ["Differentiation", "Photosynthesis", "Cell division", "Translocation"], answer: "Cell division", explanation: "Meristematic tissues are composed of actively dividing cells. This continuous cell division leads to the formation of new cells, contributing to the growth of the plant." },
                { question: "Stomata are found on the epidermis of leaves and are responsible for:", options: ["Transport of water", "Gas exchange", "Food storage", "Support"], answer: "Gas exchange", explanation: "Stomata are small pores on the leaf epidermis that are involved in the exchange of gases like carbon dioxide and oxygen, and also in transpiration (water loss)." },
                { question: "Which tissue gives flexibility to young stems and leaf stalks?", options: ["Sclerenchyma", "Parenchyma", "Collenchyma", "Meristematic"], answer: "Collenchyma", explanation: "Collenchyma cells are living cells with thickened corners. They provide mechanical support and flexibility, allowing parts of the plant to bend without breaking." },
                { question: "Which component of xylem is responsible for conduction of water?", options: ["Xylem parenchyma", "Xylem fibres", "Vessels", "Phloem"], answer: "Vessels", explanation: "Xylem vessels are tube-like structures that are the main water-conducting channels in the xylem of flowering plants." },
                { question: "What is the function of cambium?", options: ["Primary growth", "Secondary growth", "Photosynthesis", "Transpiration"], answer: "Secondary growth", explanation: "Cambium is a lateral meristematic tissue responsible for secondary growth, which results in the increase of the stem's girth." },
                { question: "Which tissue makes up the soft parts of the fruit, such as the pulp of a mango?", options: ["Sclerenchyma", "Collenchyma", "Parenchyma", "Epidermis"], answer: "Parenchyma", explanation: "Parenchyma tissue is involved in storage, photosynthesis, and secretion. It makes up the bulk of the soft parts of a plant, including the pulp of fruits." },
                { question: "The cork cambium is a type of:", options: ["Apical meristem", "Lateral meristem", "Intercalary meristem", "Permanent tissue"], answer: "Lateral meristem", explanation: "Cork cambium is a type of lateral meristem that produces cork cells externally and secondary cortex cells internally, forming the protective outer bark." },
                { question: "Which of the following tissues is a complex permanent tissue?", options: ["Parenchyma", "Collenchyma", "Sclerenchyma", "Phloem"], answer: "Phloem", explanation: "Complex permanent tissues are composed of more than one type of cell. Phloem is composed of sieve tubes, companion cells, phloem parenchyma, and phloem fibres." },
                { question: "Which tissue has a hard, waterproof coating called suberin?", options: ["Cork", "Epidermis", "Collenchyma", "Xylem"], answer: "Cork", explanation: "Cork cells, produced by cork cambium, have a substance called suberin deposited on their walls, which makes them impervious to water and gases." },
                { question: "The cells of meristematic tissue have:", options: ["Large vacuoles", "Thick cell walls", "A dense cytoplasm", "Intercellular spaces"], answer: "A dense cytoplasm", explanation: "Meristematic cells are small, have thin cell walls, a large nucleus, and a dense cytoplasm without vacuoles, as they are actively dividing." },
                { question: "Which tissue is responsible for the transport of manufactured food from the leaves?", options: ["Xylem", "Phloem", "Parenchyma", "Epidermis"], answer: "Phloem", explanation: "Phloem is the vascular tissue responsible for the translocation of food (sugars) produced during photosynthesis from the leaves to other parts of the plant." },
                { question: "Which tissue is found in the vascular bundle of a plant?", options: ["Epidermis", "Xylem and Phloem", "Cortex", "Pith"], answer: "Xylem and Phloem", explanation: "The vascular bundle contains xylem (for water transport) and phloem (for food transport), which are responsible for the conduction of water, minerals, and food throughout the plant." }
            ],
            "Animal Tissues: Epithelial": [
                { question: "What is the primary function of epithelial tissue?", options: ["Support and protection", "Movement and contraction", "Covering and protection", "Transport of gases"], answer: "Covering and protection", explanation: "Epithelial tissue forms the covering of all internal and external body surfaces, protecting the body from the outside world. It lines organs, glands, and vessels." },
                { question: "Which type of muscle tissue is voluntary and striated?", options: ["Smooth muscle", "Cardiac muscle", "Skeletal muscle", "All of the above"], answer: "Skeletal muscle", explanation: "Skeletal muscles are attached to bones and are responsible for voluntary movements. They have a striated or striped appearance under a microscope." },
                { question: "Cardiac muscle is found in the:", options: ["Stomach", "Heart", "Legs", "Intestines"], answer: "Heart", explanation: "Cardiac muscle tissue is a specialized type of muscle found only in the walls of the heart. It is involuntary and responsible for the rhythmic contractions of the heart." },
                { question: "Which tissue's cells are long, cylinder-shaped, and multinucleated?", options: ["Smooth muscle", "Skeletal muscle", "Cardiac muscle", "Nervous tissue"], answer: "Skeletal muscle", explanation: "Skeletal muscle fibers (cells) are long, cylindrical, unbranched, and multinucleated, meaning they contain multiple nuclei." },
                { question: "The simple squamous epithelium is found in the lining of the:", options: ["Stomach", "Intestines", "Blood vessels", "Kidney tubules"], answer: "Blood vessels", explanation: "Simple squamous epithelium consists of a single layer of flattened cells. Its thin structure is ideal for the exchange of substances, like gases in the alveoli or nutrients in blood vessels." },
                { question: "Which epithelial tissue is specialized for secretion and absorption and is found in the lining of the stomach and intestine?", options: ["Squamous epithelium", "Cuboidal epithelium", "Columnar epithelium", "Stratified epithelium"], answer: "Columnar epithelium", explanation: "Columnar epithelial cells are tall and pillar-like. Their primary function is secretion (e.g., mucus in the stomach) and absorption (e.g., nutrients in the small intestine)." },
                { question: "Ciliated columnar epithelium is found in the respiratory tract to:", options: ["Absorb nutrients", "Protect against friction", "Move mucus and particles", "Secrete hormones"], answer: "Move mucus and particles", explanation: "Ciliated columnar cells have hair-like projections called cilia that move in a coordinated fashion to push mucus and trapped dust particles towards the throat." },
                { question: "Which muscle tissue is found in the walls of the uterus, stomach, and urinary bladder?", options: ["Skeletal muscle", "Cardiac muscle", "Smooth muscle", "Ciliated muscle"], answer: "Smooth muscle", explanation: "Smooth muscle tissue is involuntary and responsible for the slow, sustained contractions that move substances through the internal organs." },
                { question: "Glandular epithelium is a modified form of which tissue type?", options: ["Connective tissue", "Epithelial tissue", "Muscular tissue", "Nervous tissue"], answer: "Epithelial tissue", explanation: "Glandular epithelium is a specialized epithelial tissue that folds inward to form glands, which are responsible for secreting various substances like sweat, saliva, and hormones." },
                { question: "Which type of epithelial tissue has multiple layers to provide protection against wear and tear?", options: ["Simple epithelium", "Stratified epithelium", "Cuboidal epithelium", "Columnar epithelium"], answer: "Stratified epithelium", explanation: "Stratified epithelial tissue consists of two or more layers of cells, which makes it highly effective in protecting underlying tissues from mechanical stress and abrasion." },
                { question: "The rhythmic contraction and relaxation of which muscle tissue is not under our conscious control?", options: ["Skeletal muscle", "Smooth muscle", "Cardiac muscle", "Both B and C"], answer: "Both B and C", explanation: "Smooth muscles and cardiac muscles are both involuntary, meaning their actions cannot be consciously controlled. They function automatically to regulate body processes." },
                { question: "The striated appearance of skeletal muscle is due to the presence of:", options: ["Collagen fibres", "Actin and Myosin proteins", "Calcium ions", "Nerve endings"], answer: "Actin and Myosin proteins", explanation: "The striations (stripes) in skeletal muscle are caused by the regular arrangement of contractile proteins, actin and myosin, which form repeating functional units called sarcomeres." },
                { question: "Which muscle tissue has branched, interconnected cells?", options: ["Skeletal muscle", "Smooth muscle", "Cardiac muscle", "All of the above"], answer: "Cardiac muscle", explanation: "Cardiac muscle cells are branched and interconnected by structures called intercalated discs. This allows for rapid signal transmission and coordinated contraction of the heart." },
                { question: "The cells of cuboidal epithelium are cube-shaped and are found in the lining of:", options: ["Skin", "Kidney tubules", "Blood vessels", "Stomach"], answer: "Kidney tubules", explanation: "Cuboidal epithelial cells are cube-shaped and are primarily found in the ducts of glands and kidney tubules, where they perform functions of secretion and absorption." },
                { question: "Which tissue's cells are thin, flattened, and form a delicate lining?", options: ["Squamous epithelium", "Cuboidal epithelium", "Columnar epithelium", "Connective tissue"], answer: "Squamous epithelium", explanation: "Squamous epithelial cells are thin, flattened, and form a single layer. This structure is ideal for passive diffusion and filtration, as seen in the linings of blood vessels and lung alveoli." },
                { question: "The lining of the mouth and esophagus is covered by which tissue?", options: ["Simple squamous", "Stratified squamous", "Cuboidal", "Columnar"], answer: "Stratified squamous", explanation: "The mouth and esophagus are areas that experience a lot of wear and tear. Stratified squamous epithelium, with its multiple layers, provides the necessary protection." },
                { question: "Which muscle type is responsible for the movement of food in the alimentary canal?", options: ["Skeletal", "Cardiac", "Smooth", "Striated"], answer: "Smooth", explanation: "The walls of the alimentary canal are lined with smooth muscle tissue, which contracts rhythmically (peristalsis) to push food along the digestive tract." },
                { question: "A gland that secretes substances like sweat, saliva, or tears is made of which tissue?", options: ["Epithelial", "Connective", "Muscular", "Nervous"], answer: "Epithelial", explanation: "Glands are formed from infoldings of epithelial tissue and are specialized for the production and secretion of various substances." },
                { question: "What is the specialized junction that connects cardiac muscle cells?", options: ["Myofibrils", "Sarcomeres", "Intercalated discs", "Actin filaments"], answer: "Intercalated discs", explanation: "Intercalated discs are specialized junctions between cardiac muscle cells that allow for rapid electrical signal transmission, ensuring the heart beats as a single, coordinated unit." },
                { question: "Tendons and ligaments are examples of:", options: ["Epithelial tissue", "Muscular tissue", "Connective tissue", "Nervous tissue"], answer: "Connective tissue", explanation: "Tendons and ligaments are fibrous connective tissues. Tendons connect muscle to bone, while ligaments connect bone to bone." }
            ],
            "Animal Tissues: Connective": [
                { question: "What is the main function of connective tissue?", options: ["Providing movement", "Transmitting nerve impulses", "Connecting different tissues and organs", "Forming glands"], answer: "Connecting different tissues and organs", explanation: "Connective tissue's primary role is to connect, support, and bind other tissues and organs in the body. Examples include blood, bone, and cartilage." },
                { question: "Which component of blood helps in blood clotting?", options: ["Red blood cells", "White blood cells", "Plasma", "Platelets"], answer: "Platelets", explanation: "Platelets (also known as thrombocytes) are small, colorless cell fragments in our blood that form clots and stop or prevent bleeding." },
                { question: "The longest cell in the human body is a:", options: ["Muscle cell", "Bone cell", "Nerve cell (neuron)", "Blood cell"], answer: "Nerve cell (neuron)", explanation: "Nerve cells, or neurons, are the longest cells in the body, with some extending from the spinal cord to the tips of the toes." },
                { question: "Which tissue provides support to the body and protects vital organs?", options: ["Connective tissue", "Epithelial tissue", "Nervous tissue", "Muscular tissue"], answer: "Connective tissue", explanation: "Bone and cartilage are types of connective tissue that provide structural support and protection for the body's vital organs, such as the brain and heart." },
                { question: "Which tissue is responsible for transmitting messages to and from the brain?", options: ["Epithelial tissue", "Muscular tissue", "Connective tissue", "Nervous tissue"], answer: "Nervous tissue", explanation: "Nervous tissue is specialized for the transmission of electrical signals, or nerve impulses, allowing for communication between different parts of the body and the brain." },
                { question: "Which type of connective tissue is responsible for fat storage?", options: ["Areolar tissue", "Adipose tissue", "Tendon", "Bone"], answer: "Adipose tissue", explanation: "Adipose tissue, commonly known as body fat, is a specialized connective tissue that functions primarily to store energy in the form of lipids, and to cushion and insulate the body." },
                { question: "What is the living bone cell called?", options: ["Osteon", "Osteocyte", "Chondrocyte", "Neuron"], answer: "Osteocyte", explanation: "An osteocyte is a mature bone cell that is trapped within the bone matrix and helps to maintain the bone tissue." },
                { question: "Which connective tissue has a fluid matrix called plasma?", options: ["Cartilage", "Bone", "Blood", "Areolar tissue"], answer: "Blood", explanation: "Blood is a fluid connective tissue. Its matrix, called plasma, contains red blood cells, white blood cells, and platelets." },
                { question: "The main components of nervous tissue are:", options: ["Neurons and glial cells", "Osteocytes and chondrocytes", "Fibroblasts and macrophages", "Erythrocytes and leukocytes"], answer: "Neurons and glial cells", explanation: "Nervous tissue is composed of neurons (nerve cells) that transmit impulses, and glial cells that provide support and protection to the neurons." },
                { question: "What is the flexible connective tissue found in the ear pinna and larynx?", options: ["Bone", "Ligament", "Tendon", "Cartilage"], answer: "Cartilage", explanation: "Cartilage is a flexible and firm connective tissue. It is found in places like the nose, outer ear, and between bones in joints, providing support and reducing friction." },
                { question: "A neuron's dendrites are specialized for:", options: ["Transmitting signals away from the cell body", "Receiving signals from other neurons", "Insulating the axon", "Providing structural support"], answer: "Receiving signals from other neurons", explanation: "Dendrites are short, branched extensions of a neuron that act like antennas, receiving electrical and chemical signals from other nerve cells." },
                { question: "Which type of connective tissue fills the space inside the organs and supports them?", options: ["Adipose tissue", "Dense regular tissue", "Areolar tissue", "Blood"], answer: "Areolar tissue", explanation: "Areolar tissue is a loose connective tissue that fills the space between organs, supports internal organs, and helps in tissue repair." },
                { question: "Ligaments connect:", options: ["Muscle to bone", "Bone to bone", "Bone to cartilage", "Muscle to muscle"], answer: "Bone to bone", explanation: "Ligaments are strong, fibrous connective tissues that connect bones to other bones, providing stability to joints." },
                { question: "What is the cell body of a neuron called?", options: ["Axon", "Dendrite", "Cyton", "Myelin sheath"], answer: "Cyton", explanation: "The cyton, or perikaryon, is the main part of a neuron, containing the nucleus and most of the cytoplasm. It is the metabolic center of the cell." },
                { question: "Which of the following is not a type of connective tissue?", options: ["Blood", "Bone", "Areolar tissue", "Epithelium"], answer: "Epithelium", explanation: "Epithelium is a separate primary tissue type. Blood, bone, and areolar tissue are all types of connective tissue." },
                { question: "The hard matrix of bone is composed of:", options: ["Chondrin", "Fats and lipids", "Calcium and phosphorus salts", "Plasma proteins"], answer: "Calcium and phosphorus salts", explanation: "The rigidity of bone is due to its mineralized matrix, which is primarily composed of calcium phosphate and calcium carbonate, giving it strength." },
                { question: "What is the function of myelin sheath?", options: ["To receive signals", "To transmit signals faster", "To provide nourishment to the neuron", "To produce energy"], answer: "To transmit signals faster", explanation: "Myelin sheath is a fatty layer that insulates the axon of a neuron, allowing electrical impulses to travel more rapidly and efficiently." },
                { question: "What is the function of the blood's white blood cells?", options: ["Transport oxygen", "Help in blood clotting", "Fight infection", "Provide support"], answer: "Fight infection", explanation: "White blood cells, or leukocytes, are a crucial part of the immune system. They defend the body against pathogens and foreign invaders." },
                { question: "Which tissue connects muscles to bones?", options: ["Ligaments", "Cartilage", "Tendons", "Adipose tissue"], answer: "Tendons", explanation: "Tendons are strong, cord-like fibrous connective tissues that connect skeletal muscles to bones, allowing for movement." },
                { question: "Which type of nerve carries impulses from the brain to the muscles?", options: ["Sensory nerve", "Motor nerve", "Mixed nerve", "Autonomic nerve"], answer: "Motor nerve", explanation: "Motor nerves carry signals from the central nervous system (brain and spinal cord) to the muscles and glands, causing a response." }
            ],
            "Animal Tissues: Muscular": [
                { question: "What is the function of muscular tissue?", options: ["Support", "Movement", "Protection", "Transport"], answer: "Movement", explanation: "Muscular tissue contracts to produce movement." },
                { question: "Which muscle tissue is voluntary?", options: ["Smooth", "Cardiac", "Skeletal", "All of the above"], answer: "Skeletal", explanation: "Skeletal muscle is under conscious control." },
                { question: "What is the role of actin and myosin?", options: ["Support", "Contraction", "Protection", "Secretion"], answer: "Contraction", explanation: "Actin and myosin filaments slide to produce muscle contraction." },
                { question: "Which muscle tissue is found in the heart?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Cardiac", explanation: "Cardiac muscle is found only in the heart." },
                { question: "What is the function of sarcomeres?", options: ["Support", "Contraction", "Protection", "Secretion"], answer: "Contraction", explanation: "Sarcomeres are the basic units of muscle contraction." },
                { question: "Which muscle tissue is involuntary?", options: ["Smooth", "Cardiac", "Both", "Skeletal"], answer: "Both", explanation: "Smooth and cardiac muscles are involuntary." },
                { question: "What is the role of the sarcoplasmic reticulum?", options: ["Support", "Calcium storage", "Protection", "Secretion"], answer: "Calcium storage", explanation: "The sarcoplasmic reticulum stores and releases calcium for contraction." },
                { question: "Which muscle tissue is found in the stomach?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Smooth", explanation: "Smooth muscle lines the stomach and intestines." },
                { question: "What is the function of intercalated discs?", options: ["Support", "Communication", "Protection", "Secretion"], answer: "Communication", explanation: "Intercalated discs connect cardiac muscle cells and transmit impulses." },
                { question: "Which muscle tissue is multinucleated?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Skeletal", explanation: "Skeletal muscle fibers are multinucleated." },
                { question: "What is the role of tropomyosin?", options: ["Support", "Regulation", "Protection", "Secretion"], answer: "Regulation", explanation: "Tropomyosin regulates muscle contraction by blocking actin." },
                { question: "Which muscle tissue is found in the blood vessels?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Smooth", explanation: "Smooth muscle controls blood vessel diameter." },
                { question: "What is the function of the neuromuscular junction?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "The neuromuscular junction transmits nerve impulses to muscles." },
                { question: "Which muscle tissue is striated?", options: ["Smooth", "Cardiac", "Skeletal", "Both B and C"], answer: "Both B and C", explanation: "Cardiac and skeletal muscles are striated." },
                { question: "What is the role of ATP in muscle contraction?", options: ["Support", "Energy", "Protection", "Secretion"], answer: "Energy", explanation: "ATP provides energy for muscle contraction." },
                { question: "Which muscle tissue is found in the iris?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Smooth", explanation: "Smooth muscle controls pupil dilation in the iris." },
                { question: "What is the function of the sarcolemma?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "The sarcolemma transmits action potentials into muscle fibers." },
                { question: "Which muscle tissue is found in the uterus?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Smooth", explanation: "Smooth muscle in the uterus contracts during childbirth." },
                { question: "What is the role of creatine phosphate?", options: ["Support", "Energy storage", "Protection", "Secretion"], answer: "Energy storage", explanation: "Creatine phosphate stores energy for muscle contraction." },
                { question: "Which muscle tissue is found in the biceps?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Skeletal", explanation: "Skeletal muscle forms the biceps." },
                { question: "What is the function of the motor unit?", options: ["Support", "Contraction", "Protection", "Secretion"], answer: "Contraction", explanation: "A motor unit consists of a motor neuron and the muscle fibers it controls." },
                { question: "Which muscle tissue is found in the diaphragm?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Skeletal", explanation: "Skeletal muscle forms the diaphragm for breathing." },
                { question: "What is the role of myoglobin?", options: ["Support", "Oxygen storage", "Protection", "Secretion"], answer: "Oxygen storage", explanation: "Myoglobin stores oxygen in muscle cells." },
                { question: "Which muscle tissue is found in the bladder?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Smooth", explanation: "Smooth muscle controls bladder emptying." },
                { question: "What is the function of the T-tubules?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "T-tubules transmit action potentials into muscle fibers." },
                { question: "Which muscle tissue is found in the tongue?", options: ["Smooth", "Cardiac", "Skeletal", "None"], answer: "Skeletal", explanation: "Skeletal muscle forms the tongue." }
            ],
            "Animal Tissues: Nervous": [
                { question: "What is the function of nervous tissue?", options: ["Support", "Communication", "Protection", "Transport"], answer: "Communication", explanation: "Nervous tissue transmits electrical signals for communication." },
                { question: "Which cells are the primary functional units of the nervous system?", options: ["Glial cells", "Neurons", "Schwann cells", "Oligodendrocytes"], answer: "Neurons", explanation: "Neurons transmit electrical impulses." },
                { question: "What is the role of the axon?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "The axon transmits electrical impulses away from the cell body." },
                { question: "Which cells produce myelin in the CNS?", options: ["Schwann cells", "Oligodendrocytes", "Astrocytes", "Microglia"], answer: "Oligodendrocytes", explanation: "Oligodendrocytes produce myelin in the central nervous system." },
                { question: "What is the function of the synapse?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "Synapses transmit signals between neurons." },
                { question: "Which cells provide support in the nervous system?", options: ["Neurons", "Glial cells", "Schwann cells", "Oligodendrocytes"], answer: "Glial cells", explanation: "Glial cells support and protect neurons." },
                { question: "What is the role of the sodium-potassium pump?", options: ["Support", "Resting potential", "Protection", "Secretion"], answer: "Resting potential", explanation: "The sodium-potassium pump maintains the resting membrane potential." },
                { question: "Which part of the neuron receives signals?", options: ["Axon", "Dendrite", "Cell body", "Myelin sheath"], answer: "Dendrite", explanation: "Dendrites receive signals from other neurons." },
                { question: "What is the function of the myelin sheath?", options: ["Support", "Insulation", "Protection", "Secretion"], answer: "Insulation", explanation: "The myelin sheath insulates axons to speed up signal transmission." },
                { question: "Which cells are involved in the immune response in the CNS?", options: ["Astrocytes", "Microglia", "Oligodendrocytes", "Schwann cells"], answer: "Microglia", explanation: "Microglia act as immune cells in the central nervous system." },
                { question: "What is the role of neurotransmitters?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "Neurotransmitters transmit signals across synapses." },
                { question: "Which part of the neuron contains the nucleus?", options: ["Axon", "Dendrite", "Cell body", "Myelin sheath"], answer: "Cell body", explanation: "The cell body (soma) contains the nucleus and organelles." },
                { question: "What is the function of the nodes of Ranvier?", options: ["Support", "Signal speed", "Protection", "Secretion"], answer: "Signal speed", explanation: "Nodes of Ranvier allow for rapid signal transmission (saltatory conduction)." },
                { question: "Which cells form the blood-brain barrier?", options: ["Astrocytes", "Microglia", "Oligodendrocytes", "Schwann cells"], answer: "Astrocytes", explanation: "Astrocytes help form the blood-brain barrier." },
                { question: "What is the role of the resting membrane potential?", options: ["Support", "Signal readiness", "Protection", "Secretion"], answer: "Signal readiness", explanation: "The resting membrane potential prepares the neuron to transmit signals." },
                { question: "Which part of the neuron transmits signals to other cells?", options: ["Axon", "Dendrite", "Cell body", "Myelin sheath"], answer: "Axon", explanation: "The axon transmits signals to other neurons or muscles." },
                { question: "What is the function of the synaptic cleft?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "The synaptic cleft is the gap where neurotransmitters are released." },
                { question: "Which cells are found in the PNS?", options: ["Astrocytes", "Microglia", "Schwann cells", "Oligodendrocytes"], answer: "Schwann cells", explanation: "Schwann cells produce myelin in the peripheral nervous system." },
                { question: "What is the role of calcium ions in synaptic transmission?", options: ["Support", "Neurotransmitter release", "Protection", "Secretion"], answer: "Neurotransmitter release", explanation: "Calcium ions trigger neurotransmitter release at the synapse." },
                { question: "Which part of the neuron integrates signals?", options: ["Axon", "Dendrite", "Cell body", "Myelin sheath"], answer: "Cell body", explanation: "The cell body integrates incoming signals." },
                { question: "What is the function of the action potential?", options: ["Support", "Signal transmission", "Protection", "Secretion"], answer: "Signal transmission", explanation: "The action potential is an electrical impulse that travels along the axon." },
                { question: "Which cells are involved in phagocytosis in the CNS?", options: ["Astrocytes", "Microglia", "Oligodendrocytes", "Schwann cells"], answer: "Microglia", explanation: "Microglia phagocytose debris and pathogens in the CNS." },
                { question: "What is the role of the refractory period?", options: ["Support", "Signal regulation", "Protection", "Secretion"], answer: "Signal regulation", explanation: "The refractory period prevents signal overlap and ensures directionality." },
                { question: "Which part of the neuron is covered by the myelin sheath?", options: ["Axon", "Dendrite", "Cell body", "Synapse"], answer: "Axon", explanation: "The myelin sheath covers the axon to speed up signal transmission." },
                { question: "What is the function of the postsynaptic membrane?", options: ["Support", "Signal reception", "Protection", "Secretion"], answer: "Signal reception", explanation: "The postsynaptic membrane receives neurotransmitters." },
                { question: "Which cells provide structural support in the CNS?", options: ["Astrocytes", "Microglia", "Oligodendrocytes", "Schwann cells"], answer: "Astrocytes", explanation: "Astrocytes provide structural and metabolic support to neurons." }
            ],
            "Quiz Master Challenge": [
                { question: "Which component of phloem is a living cell that assists in transport?", options: ["Vessels", "Tracheids", "Sieve tubes", "Companion cells"], answer: "Companion cells", explanation: "Companion cells are specialized parenchyma cells that are closely associated with sieve tube elements in phloem. They provide metabolic support for the sieve tube elements." },
                { question: "What is the matrix of blood called?", options: ["Blood cells", "Platelets", "Plasma", "Lymph"], answer: "Plasma", explanation: "Plasma is the liquid matrix of blood. It is a yellowish fluid that makes up about 55% of the total blood volume and contains blood cells, nutrients, hormones, and waste products." },
                { question: "Which type of tissue forms the lining of the mouth?", options: ["Cuboidal epithelium", "Columnar epithelium", "Stratified squamous epithelium", "Glandular epithelium"], answer: "Stratified squamous epithelium", explanation: "Stratified squamous epithelium is made of multiple layers of flattened cells. This multi-layered structure provides strong protection against mechanical wear and tear, making it suitable for areas like the mouth lining and skin." },
                { question: "A neuron's axon is specialized for:", options: ["Receiving signals", "Processing information", "Transmitting signals over long distances", "Providing support"], answer: "Transmitting signals over long distances", explanation: "The axon is a long, slender projection of a nerve cell that typically conducts electrical impulses away from the cell body." },
                { question: "Which tissue gives flexibility to plant parts like leaf stalks and young stems?", options: ["Sclerenchyma", "Parenchyma", "Collenchyma", "Meristematic"], answer: "Collenchyma", explanation: "Collenchyma is a simple permanent tissue that provides mechanical support and flexibility to young plant parts without the rigidity of sclerenchyma." },
                { question: "What is the term for the process in which an organ or part of an organ loses its ability to function due to a lack of blood supply?", options: ["Necrosis", "Apoptosis", "Regeneration", "Differentiation"], answer: "Necrosis", explanation: "Necrosis is the pathological death of cells and living tissue caused by disease, injury, or failure of the blood supply. Apoptosis is programmed cell death." },
                { question: "Which type of connective tissue contains large amounts of fat cells and provides insulation?", options: ["Areolar", "Adipose", "Dense regular", "Cartilage"], answer: "Adipose", explanation: "Adipose tissue is specialized to store fat, which serves as a long-term energy reserve and provides a protective layer of insulation against cold." },
                { question: "The presence of intercalated discs is a characteristic of which tissue?", options: ["Skeletal muscle", "Smooth muscle", "Cardiac muscle", "Nervous tissue"], answer: "Cardiac muscle", explanation: "Intercalated discs are unique to cardiac muscle and are crucial for the heart's function, allowing it to beat as a coordinated unit." },
                { question: "Which tissue in animals is responsible for the formation of the skeleton?", options: ["Cartilage and ligament", "Bone and cartilage", "Tendon and bone", "Adipose and areolar"], answer: "Bone and cartilage", explanation: "The vertebrate skeleton is composed of bone and cartilage, both of which are specialized connective tissues that provide the body's structural framework." },
                { question: "Which tissue forms a protective cork or bark layer in older plant stems and roots?", options: ["Epidermis", "Cortex", "Vascular tissue", "Cork cambium"], answer: "Cork cambium", explanation: "The cork cambium is a lateral meristem that produces the protective cork (bark) layer, replacing the epidermis in woody plants as they grow older." },
                { question: "What is the name for the small cavities within bone tissue that house osteocytes?", options: ["Haversian canals", "Lacunae", "Canaliculi", "Lamellae"], answer: "Lacunae", explanation: "Lacunae are the small spaces or cavities within the bone matrix where the bone cells (osteocytes) are located." },
                { question: "Which plant tissue has a very hard, lignified cell wall and is often found in the shells of nuts and seed coats?", options: ["Parenchyma", "Collenchyma", "Sclerenchyma", "Phloem"], answer: "Sclerenchyma", explanation: "Sclerenchyma tissue, with its thick, lignified walls, provides maximum hardness and mechanical strength, making it ideal for forming protective shells and seed coats." },
                { question: "What is the role of glial cells in nervous tissue?", options: ["To transmit impulses", "To receive signals", "To produce hormones", "To support and nourish neurons"], answer: "To support and nourish neurons", explanation: "Glial cells, or neuroglia, are non-neuronal cells in the nervous system that provide support, protection, and nourishment to neurons, but they do not transmit nerve impulses themselves." },
                { question: "Which muscle type is responsible for peristalsis, the movement of food through the digestive tract?", options: ["Skeletal muscle", "Cardiac muscle", "Smooth muscle", "Striated muscle"], answer: "Smooth muscle", explanation: "Peristalsis is an involuntary process driven by the rhythmic, wave-like contractions of smooth muscles in the walls of the esophagus, stomach, and intestines." },
                { question: "Blood is a type of specialized connective tissue because:", options: ["It provides support", "It has a matrix", "It connects bones and muscles", "It is involuntary"], answer: "It has a matrix", explanation: "Connective tissues are defined by their cells being embedded in a non-living intercellular substance called a matrix. In blood, this matrix is the liquid plasma." },
                { question: "The type of plant tissue that has a large central vacuole and is involved in storage is:", options: ["Sclerenchyma", "Parenchyma", "Meristematic", "Collenchyma"], answer: "Parenchyma", explanation: "Parenchyma cells are living, thin-walled, and often have a large central vacuole, making them the primary site for the storage of food, water, and other substances." },
                { question: "What is the function of phloem parenchyma?", options: ["Food transport", "Support", "Food storage", "Water transport"], answer: "Food storage", explanation: "Phloem parenchyma cells are living cells that are part of the phloem tissue. Their main function is to store food and other substances within the phloem." },
                { question: "The loss of water from a plant through its leaves is a function of which tissue?", options: ["Xylem", "Phloem", "Epidermis", "Vascular cambium"], answer: "Epidermis", explanation: "The epidermis, particularly through stomata, plays a crucial role in transpiration, which is the process of water loss from a plant." },
                { question: "Which tissue has a single nucleus per cell and is found in the walls of the stomach and bladder?", options: ["Skeletal muscle", "Smooth muscle", "Cardiac muscle", "All of the above"], answer: "Smooth muscle", explanation: "Smooth muscle cells are spindle-shaped, unstriated, and contain a single nucleus. They form the muscular walls of internal organs." },
                { question: "Which type of epithelium is composed of a single layer of cube-shaped cells and is involved in secretion?", options: ["Simple squamous", "Stratified columnar", "Cuboidal", "Simple columnar"], answer: "Cuboidal", explanation: "Cuboidal epithelium, characterized by its single layer of cube-shaped cells, is commonly found in glands and ducts where secretion is a primary function." }
            ]
        };

        // DOM Elements
        const topicSelector = document.getElementById("topic-selector");
        const quizScreen = document.getElementById("quiz-screen");
        const resultsScreen = document.getElementById("results-screen");
        const topicTitle = document.getElementById("topic-title");
        const questionNumber = document.getElementById("question-number");
        const questionText = document.getElementById("question-text");
        const optionsContainer = document.getElementById("options-container");
        const explanationContainer = document.getElementById("explanation-container");
        const explanationText = document.getElementById("explanation-text");
        const nextButton = document.getElementById("next-btn");
        const prevButton = document.getElementById("prev-btn");
        const submitButton = document.getElementById("submit-btn");
        const deeperExplanationButton = document.getElementById("deeper-explanation-btn");
        const scoreElement = document.getElementById("score");
        const finalScoreElement = document.getElementById("final-score");
        const progressElement = document.getElementById("progress");
        const attemptedElement = document.getElementById("attempted");
        const restartButton = document.getElementById("restart-btn");
        const newTopicButton = document.getElementById("new-topic-btn");
        const sidebar = document.getElementById("sidebar");

        // Game State
        let currentTopic = "";
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let attempted = 0;
        let userAnswers = [];

        // Initialize Topic Buttons
        function initTopicButtons() {
            topicSelector.classList.remove("hidden");
            quizScreen.classList.add("hidden");
            resultsScreen.classList.add("hidden");
        }

        // Initialize Sidebar Navigation
        function initSidebarNavigation() {
            sidebar.innerHTML = "";
            for (let i = 1; i <= 20; i++) {
                const navButton = document.createElement("button");
                navButton.className = "question-nav";
                navButton.textContent = i;
                navButton.dataset.index = i - 1;
                navButton.onclick = () => jumpToQuestion(i - 1);
                sidebar.appendChild(navButton);
            }
        }

        // Start Quiz
        function startQuiz(topic) {
            currentTopic = topic;
            currentQuestions = [...quizData[topic]];
            currentQuestionIndex = 0;
            score = 0;
            attempted = 0;
            userAnswers = Array(20).fill(null);
            scoreElement.textContent = score;
            progressElement.textContent = `${currentQuestionIndex + 1}/20`;
            attemptedElement.textContent = attempted;
            topicTitle.textContent = topic;
            topicSelector.classList.add("hidden");
            quizScreen.classList.remove("hidden");
            resultsScreen.classList.add("hidden");
            initSidebarNavigation();
            showQuestion();
        }

        // Show Question
        function showQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            questionNumber.textContent = `Question ${currentQuestionIndex + 1}`;
            questionText.textContent = question.question;
            optionsContainer.innerHTML = "";
            explanationContainer.classList.remove("show");
            nextButton.classList.add("hidden");
            submitButton.classList.add("hidden");
            prevButton.disabled = currentQuestionIndex === 0;

            // Update sidebar navigation colors
            updateSidebarNavigation();

            // Shuffle options
            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);
            shuffledOptions.forEach(option => {
                const button = document.createElement("button");
                button.textContent = option;
                button.className = "option-btn";
                button.onclick = () => checkAnswer(option, question.answer);
                optionsContainer.appendChild(button);
            });

            // Show submit button if on last question
            if (currentQuestionIndex === currentQuestions.length - 1) {
                submitButton.classList.remove("hidden");
            } else {
                nextButton.classList.remove("hidden");
            }
        }

        // Update Sidebar Navigation Colors
        function updateSidebarNavigation() {
            const navButtons = sidebar.querySelectorAll(".question-nav");
            navButtons.forEach((button, index) => {
                button.classList.remove("attempted", "correct", "incorrect", "active");
                if (userAnswers[index] !== null) {
                    button.classList.add("attempted");
                    if (userAnswers[index] === currentQuestions[index].answer) {
                        button.classList.add("correct");
                    } else {
                        button.classList.add("incorrect");
                    }
                }
                if (index === currentQuestionIndex) {
                    button.classList.add("active");
                }
            });
        }

        // Check Answer
        function checkAnswer(selectedOption, correctAnswer) {
            const buttons = optionsContainer.querySelectorAll(".option-btn");
            buttons.forEach(button => {
                button.disabled = true;
                if (button.textContent === correctAnswer) {
                    button.classList.add("correct");
                } else if (button.textContent === selectedOption) {
                    button.classList.add("incorrect");
                }
            });

            if (selectedOption === correctAnswer) {
                score++;
                scoreElement.textContent = score;
            }

            attempted++;
            attemptedElement.textContent = attempted;
            userAnswers[currentQuestionIndex] = selectedOption;
            updateSidebarNavigation();

            explanationText.textContent = currentQuestions[currentQuestionIndex].explanation;
            explanationContainer.classList.add("show");

            if (currentQuestionIndex < currentQuestions.length - 1) {
                nextButton.classList.remove("hidden");
            } else {
                submitButton.classList.remove("hidden");
            }
        }

        // Next Question
        nextButton.onclick = () => {
            currentQuestionIndex++;
            showQuestion();
        };

        // Previous Question
        prevButton.onclick = () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        };

        // Jump to Question
        function jumpToQuestion(index) {
            currentQuestionIndex = index;
            showQuestion();
        }

        // Submit Quiz
        submitButton.onclick = () => {
            showResults();
        };

        // Show Results
        function showResults() {
            quizScreen.classList.add("hidden");
            resultsScreen.classList.remove("hidden");
            finalScoreElement.textContent = `${score}/20`;
        }

        // Restart Quiz
        restartButton.onclick = () => startQuiz(currentTopic);

        // New Topic
        newTopicButton.onclick = () => {
            resultsScreen.classList.add("hidden");
            initTopicButtons();
        };

        // Deeper Explanation
        deeperExplanationButton.onclick = () => {
            if (navigator.onLine) {
                // Placeholder for API call
                alert("🌐 Online: Fetching deeper explanation from Gemini AI...");
            } else {
                alert("⚠️ Offline: Deeper explanations require an internet connection. Here's a brief explanation instead.");
            }
        };

        // Initialize Game
        window.onload = initTopicButtons;
    </script>
<a href="index.html">वापस मुख्य मेनू पर जाएँ(Return to Main Menu)</a>
</body>
</html>
